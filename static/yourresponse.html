<html>
<script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.min.js"></script>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-animate.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.1/angular-sanitize.js"></script>
  <script src="https://angular-ui.github.io/bootstrap/ui-bootstrap-tpls-2.5.0.js"></script>
  <link href="https://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
</head>

<style>
      .panel > .panel-heading {
          background-image: none;
          background-color: #006666;
          color: white;
          border: 1px solid #006666; 
      }

      .panel {
          border: 1px solid #006666;
      }
</style>

<body>
    <div ng-app="myApp" ng-controller="myCtrl" style="margin-left:10%;margin-right:10%;margin-top:50px;width:80%" >

        <h1 style="text-align:center;font-size:450%;font-family:'Times New Roman'" >Your Responses</h1>
        <br>
        <br>
        <table class="table table-bordered">
            <tbody ng-repeat="x in myresp">
                <tr>
                    <td>Question : {{x.question}}</td>
                </tr>
                <tr>
                    <td>Answer : {{x.answer}}</td>
                </tr>
            </tbody>
        </table>
        <button type="button" class="btn btn-block btn-primary" ng-click="back()">    
            back to surveylist <span class="caret"></span>
        </button>
    </div>
</body>


<script>
    var app = angular.module('myApp', ['ui.bootstrap']);
    app.controller('myCtrl', function($scope, $http, $timeout, $interval, $q) {
        $scope.service_url = "http://127.0.0.1/api/v1/";
        $scope.myresp = []
        $scope.token = localStorage.getItem("token")
        if ($scope.token == null){
            $scope.token = ""
        }

        $scope.get_user_resp = function() {
            $http(
                {
                    url: $scope.service_url + 'takesurvey/',
                    method: 'GET',
                    params: {
                        Token : $scope.token
                    }
                }
            ).then(
                function (response) {
                    console.log(response.data.responseData)
                    $scope.myresp = response.data.responseData
                },
                function(response) {
                    alert(response.data.message)
                } 
            )
        }

        $scope.back = function(){
            window.location.href = "surveyslist.html";
        }

        $scope.get_user_resp()

    })
</script> 

</html>
